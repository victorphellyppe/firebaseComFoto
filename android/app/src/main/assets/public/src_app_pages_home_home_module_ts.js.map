{"version":3,"file":"src_app_pages_home_home_module_ts.js","mappings":"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","sources":["./src/app/pages/home/home-routing.module.ts","./src/app/pages/home/home.module.ts","./src/app/pages/home/home.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { HomePage } from './home.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HomePage,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HomePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","import { UtilsService } from './../../services/utils.service';\r\nimport { AuthService } from './../../services/auth.service';\r\nimport { AvatarService } from './../../services/avatar.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\r\nimport {\r\n  ActionPerformed,\r\n  PushNotificationSchema,\r\n  PushNotifications,\r\n  Token,\r\n} from '@capacitor/push-notifications';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: 'home.page.html',\r\n  styleUrls: ['home.page.scss'],\r\n})\r\nexport class HomePage implements OnInit{\r\n  public profile:any = null;\r\n  constructor(\r\n    public avatarSvc: AvatarService,\r\n    public authSvc: AuthService,\r\n    public utils: UtilsService\r\n  ) {\r\n    this.avatarSvc.getUserProfile().subscribe(data => {\r\n      this.profile = data;\r\n    });\r\n  }\r\n\r\n  ngOnInit(){\r\n    this.initializeFirebase();\r\n  }\r\n\r\n  initializeFirebase(){\r\n    console.log('Initializing HomePage');\r\n\r\n    // Request permission to use push notifications\r\n    // iOS will prompt user and return if they granted permission or not\r\n    // Android will just grant without prompting\r\n    PushNotifications.requestPermissions().then(result => {\r\n      if (result.receive === 'granted') {\r\n        // Register with Apple / Google to receive push via APNS/FCM\r\n        PushNotifications.register();\r\n      } else {\r\n        // Show some error\r\n      }\r\n    });\r\n\r\n    // On success, we should be able to receive notifications\r\n    PushNotifications.addListener('registration',\r\n      (token: Token) => {\r\n        alert('Push registration success, token: ' + token.value);\r\n      }\r\n    );\r\n\r\n    // Some issue with our setup and push will not work\r\n    PushNotifications.addListener('registrationError',\r\n      (error: any) => {\r\n        alert('Error on registration: ' + JSON.stringify(error));\r\n      }\r\n    );\r\n\r\n    // Show us the notification payload if the app is open on our device\r\n    PushNotifications.addListener('pushNotificationReceived',\r\n      (notification: PushNotificationSchema) => {\r\n        alert('Push received: ' + JSON.stringify(notification));\r\n      }\r\n    );\r\n\r\n    // Method called when tapping on a notification\r\n    PushNotifications.addListener('pushNotificationActionPerformed',\r\n      (notification: ActionPerformed) => {\r\n        alert('Push action performed: ' + JSON.stringify(notification));\r\n      }\r\n    );\r\n  }\r\n  async changeImage(){\r\n    const image = await Camera.getPhoto({\r\n      quality: 90,\r\n      allowEditing: false,\r\n      resultType: CameraResultType.Base64,\r\n      source: CameraSource.Photos\r\n    });\r\n    console.log(image);\r\n\r\n    if(image) {\r\n      const loading = await this.utils.loadingCtrl.create();\r\n      await loading.present();\r\n\r\n      const result = await this.avatarSvc.uploadImage(image);\r\n      await loading.dismiss();\r\n\r\n      console.log(result, 'log result');\r\n\r\n      if(!result){\r\n        this.utils.showAlert('Upload falhou.', 'Não foi possível fazer o upload da imagem.');\r\n      }\r\n    }\r\n  }\r\n\r\n  async logout(){\r\n    await this.authSvc.logout();\r\n    this.utils.router.navigateByUrl('/', { replaceUrl: true });\r\n    console.log('Logout');\r\n  }\r\n\r\n\r\n\r\n}\r\n"],"names":["UtilsService","AuthService","AvatarService","Component","Camera","CameraResultType","CameraSource","PushNotifications","HomePage","constructor","avatarSvc","authSvc","utils","getUserProfile","subscribe","data","profile","ngOnInit","initializeFirebase","console","log","requestPermissions","then","result","receive","register","addListener","token","alert","value","error","JSON","stringify","notification","changeImage","image","getPhoto","quality","allowEditing","resultType","Base64","source","Photos","loading","loadingCtrl","create","present","uploadImage","dismiss","showAlert","logout","router","navigateByUrl","replaceUrl","selector","template"],"sourceRoot":"webpack:///"}